
<!DOCTYPE html>
<html lang="zh-Hans" class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vue自定义指令 - 缘来</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;对于一些项目中经常使用的功能（比如：复制、长按、输入过滤、水印等），我们可以把它们做成相应的指令，之后需要用到的地方直接添加相应的指令就行,"> 
    <meta name="author" content="coolsong"> 
    <link rel="alternative" href="atom.xml" title="缘来" type="application/atom+xml"> 
    <link rel="icon" href="/img/x1.png"> 
    
    <link rel="stylesheet" href="/css/diaspora.css">
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">缘来</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="https://songxuy.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">Vue自定义指令</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">Vue自定义指令</h1>
        <div class="stuff">
            <span>十二月 22, 2020</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Vue/">Vue</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/自定义指令/">自定义指令</a></li></ul>


        </div>
        <div class="content markdown">
            <section id="nice" data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; color: #2b2b2b; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;"><p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于一些项目中经常使用的功能（比如：复制、长按、输入过滤、水印等），我们可以把它们做成相应的指令，之后需要用到的地方直接添加相应的指令就行了。下面就是用Vue3来实现几个常用的指令：</p><br><a id="more"></a><br><h4 data-tool="mdnice编辑器" id="指令的介绍及引入" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span><a href="#指令的介绍及引入" class="headerlink" title="指令的介绍及引入"></a>指令的介绍及引入</span><span class="suffix" style="display: none;"></span></h4><br><blockquote class="multiquote-1" data-tool="mdnice编辑器" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);"><span style="color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;">❝</span><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;">Vue 自定义指令有全局注册和局部注册两种方式。先来看看注册全局指令的方式，通过&nbsp;Vue.directive( id, [definition] )&nbsp;方式注册全局指令。然后在入口文件中进行&nbsp;Vue.use()&nbsp;调用。</p><br><span style="float: right; color: RGBA(64, 184, 250, .5);">❞</span></blockquote><br><ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;"><br><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">这里我们批量注册组件。新建directives/index.js</section></li></ul><br><pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #fafafa; border-radius: 5px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">import</span>&nbsp;copy&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘./copy’</span><br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">import</span>&nbsp;longpress&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘./longpress’</span><br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">import</span>&nbsp;emoji&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘./emoji’</span><br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">import</span>&nbsp;permission&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘./permission’</span><br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">import</span>&nbsp;waterMarker&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘./watermark’</span><br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">import</span>&nbsp;draggable&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘./drag’</span><br><span class="hljs-comment" style="color: #a0a1a7; font-style: italic; line-height: 26px;">//&nbsp;自定义指令</span><br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;directives&nbsp;=&nbsp;{<br>&nbsp;&nbsp;copy,<br>&nbsp;&nbsp;longpress,<br>&nbsp;&nbsp;emoji,<br>&nbsp;&nbsp;permission,<br>&nbsp;&nbsp;waterMarker,<br>&nbsp;&nbsp;draggable<br>}<br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(Vue)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">Object</span>.keys(directives).forEach(<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">key</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">console</span>.log(key)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vue.directive(key,&nbsp;directives[key])<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;},<br>}<br></code></pre><br><ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;"><br><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">在main.js中引入</section></li></ul><br><pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #fafafa; border-radius: 5px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">import</span>&nbsp;Directives&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘./directives’</span><br>createApp(App).use(Directives).mount(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘#app’</span>)<br></code></pre><br><ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;"><br><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">指令提供了一些生命周期钩子函数</section></li></ul><br><blockquote class="multiquote-1" data-tool="mdnice编辑器" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);"><span style="color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;">❝</span><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;">//&nbsp;在绑定元素的父组件被挂载之前调用<br>&nbsp;beforeMount(el,&nbsp;binding,&nbsp;vnode)&nbsp;{},<br>&nbsp;//&nbsp;在挂载绑定元素的父组件时调用<br>&nbsp;mounted(el,&nbsp;binding,&nbsp;vnode)&nbsp;{},<br>&nbsp;//&nbsp;在更新包含组件的VNode之前调用<br>&nbsp;beforeUpdate(el,&nbsp;binding,&nbsp;vnode,&nbsp;prevNode)&nbsp;{},<br>&nbsp;//&nbsp;组件的VNode及其子组件的VNode更新之后调用<br>&nbsp;updated(el,&nbsp;binding,&nbsp;vnode,&nbsp;prevNode)&nbsp;{},<br>&nbsp;//&nbsp;在卸载绑定元素的父组件之前调用<br>&nbsp;beforeUnmount(el,&nbsp;binding,&nbsp;vnode)&nbsp;{},<br>&nbsp;//&nbsp;在卸载绑定元素的父组件时调用<br>&nbsp;unmounted(el,&nbsp;binding,&nbsp;vnode)&nbsp;{}</p><br><span style="float: right; color: RGBA(64, 184, 250, .5);">❞</span></blockquote><br><h4 data-tool="mdnice编辑器" id="复制" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span><a href="#复制" class="headerlink" title="复制"></a>复制</span><span class="suffix" style="display: none;"></span></h4><br><ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;"><br><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">功能：点击复制指定的文本</section></li></ul><br><blockquote class="multiquote-1" data-tool="mdnice编辑器" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);"><span style="color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;">❝</span><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;">思路：<br>主要是通过复值给动态创建的textarea，利用其select方法，在通过execCommand执行复制操作</p><br><span style="float: right; color: RGBA(64, 184, 250, .5);">❞</span></blockquote><br><pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #fafafa; border-radius: 5px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;copy&nbsp;=&nbsp;{<br>&nbsp;&nbsp;mounted(el,&nbsp;{&nbsp;value&nbsp;})&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;el.$value&nbsp;=&nbsp;value<br>&nbsp;&nbsp;&nbsp;&nbsp;el.handler&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">if</span>&nbsp;(!el.$value)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">console</span>.log(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘无复制内容’</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #a0a1a7; font-style: italic; line-height: 26px;">//&nbsp;动态创建&nbsp;textarea&nbsp;标签</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;textarea&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.createElement(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘textarea’</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textarea.readOnly&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘readonly’</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textarea.style.position&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘absolute’</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textarea.style.left&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘-9999px’</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textarea.value&nbsp;=&nbsp;el.$value<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.body.appendChild(textarea)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #a0a1a7; font-style: italic; line-height: 26px;">//&nbsp;选中值并复制</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textarea.select()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;result&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.execCommand(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘Copy’</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">if</span>&nbsp;(result)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">console</span>.log(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘复制成功’</span>)&nbsp;<span class="hljs-comment" style="color: #a0a1a7; font-style: italic; line-height: 26px;">//&nbsp;可根据项目UI仔细设计</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.body.removeChild(textarea)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;el.addEventListener(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘click’</span>,&nbsp;el.handler)<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;updated(el,&nbsp;{&nbsp;value&nbsp;})&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;el.$value&nbsp;=&nbsp;value<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;unmounted(el)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;el.removeEventListener(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘click’</span>,&nbsp;el.handler)<br>&nbsp;&nbsp;},<br>}<br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">default</span>&nbsp;copy<br></code></pre><br><h4 data-tool="mdnice编辑器" id="拖拽" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span><a href="#拖拽" class="headerlink" title="拖拽"></a>拖拽</span><span class="suffix" style="display: none;"></span></h4><br><ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;"><br><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">功能： 使指令上的元素能够拖拽移动</section></li></ul><br><blockquote class="multiquote-1" data-tool="mdnice编辑器" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);"><span style="color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;">❝</span><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;">思路：<br>主要是通过监听dom的mousedown、mousemove、mouseup方法，通过获取mousemove返回的位置来修改元素的style</p><br><span style="float: right; color: RGBA(64, 184, 250, .5);">❞</span></blockquote><br><pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #fafafa; border-radius: 5px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;draggable&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">mounted</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;">el</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;el.style.cursor&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘move’</span><br>&nbsp;&nbsp;&nbsp;&nbsp;el.onmousedown&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;">e</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;disx&nbsp;=&nbsp;e.pageX&nbsp;-&nbsp;el.offsetLeft<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;disy&nbsp;=&nbsp;e.pageY&nbsp;-&nbsp;el.offsetTop<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.onmousemove&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;">e</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;x&nbsp;=&nbsp;e.pageX&nbsp;-&nbsp;disx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;y&nbsp;=&nbsp;e.pageY&nbsp;-&nbsp;disy<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;maxX&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.body.clientWidth&nbsp;-&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">parseInt</span>(<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">window</span>.getComputedStyle(el).width)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;maxY&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.body.clientHeight&nbsp;-&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">parseInt</span>(<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">window</span>.getComputedStyle(el).height)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">console</span>.log(<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.body.clientHeight,&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.body.clientWidth,&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">window</span>.getComputedStyle(el).height,&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">window</span>.getComputedStyle(el).width)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">if</span>&nbsp;(x&nbsp;&lt;&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">0</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">else</span>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">if</span>&nbsp;(x&nbsp;&gt;&nbsp;maxX)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;maxX<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">if</span>&nbsp;(y&nbsp;&lt;&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">0</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">else</span>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">if</span>&nbsp;(y&nbsp;&gt;&nbsp;maxY)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;maxY<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el.style.left&nbsp;=&nbsp;x&nbsp;+&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘px’</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el.style.top&nbsp;=&nbsp;y&nbsp;+&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘px’</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.onmouseup&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.onmousemove&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.onmouseup&nbsp;=&nbsp;<span class="hljs-literal" style="color: #0184bb; line-height: 26px;">null</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;},<br>}<br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">default</span>&nbsp;draggable<br></code></pre><br><h4 data-tool="mdnice编辑器" id="输入过滤" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span><a href="#输入过滤" class="headerlink" title="输入过滤"></a>输入过滤</span><span class="suffix" style="display: none;"></span></h4><br><ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;"><br><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">功能： 对加上指令的输入框进行输入过滤</section></li></ul><br><blockquote class="multiquote-1" data-tool="mdnice编辑器" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);"><span style="color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;">❝</span><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;">思路：<br>监听输入事件input，通过正则表达式对输入的东西进行过滤</p><br><span style="float: right; color: RGBA(64, 184, 250, .5);">❞</span></blockquote><br><pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #fafafa; border-radius: 5px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;findEle&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">parent,&nbsp;type</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">return</span>&nbsp;parent.tagName.toLowerCase()&nbsp;===&nbsp;type&nbsp;?&nbsp;parent&nbsp;:&nbsp;parent.querySelector(type)<br>}<br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;emoji&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">mounted</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;">el</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #a0a1a7; font-style: italic; line-height: 26px;">//&nbsp;正则规则可根据需求自定义</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">var</span>&nbsp;regRule&nbsp;=&nbsp;<span class="hljs-regexp" style="color: #50a14f; line-height: 26px;">/[^\u4E00-\u9FA5|\d|a-zA-Z|\r\n\s,.?!，。？！…—&amp;$=()-+/<em>{}[]]|\s/g</em></span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;$inp&nbsp;=&nbsp;findEle(el,&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘input’</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;el.$inp&nbsp;=&nbsp;$inp<br>&nbsp;&nbsp;&nbsp;&nbsp;$inp.handle&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">let</span>&nbsp;val&nbsp;=&nbsp;$inp.value<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inp.value&nbsp;=&nbsp;val.replace(regRule,&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘’</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;$inp.addEventListener(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘input’</span>,&nbsp;$inp.handle)<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">unmounted</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;">el</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;el.$inp.removeEventListener(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘input’</span>,&nbsp;el.$inp.handle)<br>&nbsp;&nbsp;},<br>}<br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">default</span>&nbsp;emoji<br></code></pre><br><h4 data-tool="mdnice编辑器" id="水印" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span><a href="#水印" class="headerlink" title="水印"></a>水印</span><span class="suffix" style="display: none;"></span></h4><br><ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;"><br><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">功能： 为该页面创建可自定义内容的水印</section></li></ul><br><blockquote class="multiquote-1" data-tool="mdnice编辑器" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);"><span style="color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;">❝</span><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;">思路：<br>这里的水印是通过canvas实现的，我之前的blog有介绍过水印生成，这里就不在赘述</p><br><span style="float: right; color: RGBA(64, 184, 250, .5);">❞</span></blockquote><br><pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #fafafa; border-radius: 5px;"><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #4078f2; line-height: 26px;">addWaterMarker</span>(<span class="hljs-params" style="line-height: 26px;">str,&nbsp;parentNode,&nbsp;font,&nbsp;textColor</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-comment" style="color: #a0a1a7; font-style: italic; line-height: 26px;">//&nbsp;水印文字，父元素，字体，文字颜色</span><br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">var</span>&nbsp;can&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">document</span>.createElement(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘canvas’</span>)<br>&nbsp;&nbsp;parentNode.appendChild(can)<br>&nbsp;&nbsp;can.width&nbsp;=&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">200</span><br>&nbsp;&nbsp;can.height&nbsp;=&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">150</span><br>&nbsp;&nbsp;can.style.display&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘none’</span><br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">var</span>&nbsp;cans&nbsp;=&nbsp;can.getContext(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘2d’</span>)<br>&nbsp;&nbsp;cans.rotate((<span class="hljs-number" style="color: #986801; line-height: 26px;">-20</span>&nbsp;&nbsp;<span class="hljs-built_in" style="color: #c18401; line-height: 26px;">Math</span>.PI)&nbsp;/&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">180</span>)<br>&nbsp;&nbsp;cans.font&nbsp;=&nbsp;font&nbsp;||&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘16px&nbsp;Microsoft&nbsp;JhengHei’</span><br>&nbsp;&nbsp;cans.fillStyle&nbsp;=&nbsp;textColor&nbsp;||&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘rgba(180,&nbsp;180,&nbsp;180,&nbsp;0.3)’</span><br>&nbsp;&nbsp;cans.textAlign&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘left’</span><br>&nbsp;&nbsp;cans.textBaseline&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘Middle’</span><br>&nbsp;&nbsp;cans.fillText(str,&nbsp;can.width&nbsp;/&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">10</span>,&nbsp;can.height&nbsp;/&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">2</span>)<br>&nbsp;&nbsp;parentNode.style.backgroundImage&nbsp;=&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘url(‘</span>&nbsp;+&nbsp;can.toDataURL(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘image/png’</span>)&nbsp;+&nbsp;<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘)’</span><br>}<br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;waterMarker&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">mounted</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">function</span>&nbsp;(<span class="hljs-params" style="line-height: 26px;">el,&nbsp;binding</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;addWaterMarker(binding.value.text,&nbsp;el,&nbsp;binding.value.font,&nbsp;binding.value.textColor)<br>&nbsp;&nbsp;},<br>}<br><span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">default</span>&nbsp;waterMarker<br></code></pre><br><h4 data-tool="mdnice编辑器" id="使用代码" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span><a href="#使用代码" class="headerlink" title="使用代码"></a>使用代码</span><span class="suffix" style="display: none;"></span></h4><br><pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #fafafa; border-radius: 5px;">&lt;template&gt;<br>&nbsp;&nbsp;<span class="xml" style="line-height: 26px;"><span class="hljs-tag" style="line-height: 26px;">&lt;<span class="hljs-name" style="color: #e45649; line-height: 26px;">div</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">class</span>=<span class="hljs-string" style="color: #50a14f; line-height: 26px;">“app”</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag" style="line-height: 26px;">&lt;<span class="hljs-name" style="color: #e45649; line-height: 26px;">button</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">v-copy</span>=<span class="hljs-string" style="color: #50a14f; line-height: 26px;">“copyText”</span>&gt;</span>复制<span class="hljs-tag" style="line-height: 26px;">&lt;/<span class="hljs-name" style="color: #e45649; line-height: 26px;">button</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag" style="line-height: 26px;">&lt;<span class="hljs-name" style="color: #e45649; line-height: 26px;">input</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">type</span>=<span class="hljs-string" style="color: #50a14f; line-height: 26px;">“text”</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">v-model</span>=<span class="hljs-string" style="color: #50a14f; line-height: 26px;">“note”</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">v-emoji</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;<span class="hljs-tag" style="line-height: 26px;">&lt;<span class="hljs-name" style="color: #e45649; line-height: 26px;">div</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">class</span>=<span class="hljs-string" style="color: #50a14f; line-height: 26px;">“water”</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">v-waterMarker</span>=<span class="hljs-string" style="color: #50a14f; line-height: 26px;">“{text:’lzg版权所有’,textColor:’rgba(180,&nbsp;180,&nbsp;180,&nbsp;0.4)’}”</span>&gt;</span><span class="hljs-tag" style="line-height: 26px;">&lt;/<span class="hljs-name" style="color: #e45649; line-height: 26px;">div</span>&gt;</span><br>&nbsp;&nbsp;<span class="hljs-tag" style="line-height: 26px;">&lt;<span class="hljs-name" style="color: #e45649; line-height: 26px;">div</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">class</span>=<span class="hljs-string" style="color: #50a14f; line-height: 26px;">“box”</span>&nbsp;<span class="hljs-attr" style="color: #986801; line-height: 26px;">v-draggable</span>&gt;</span><span class="hljs-tag" style="line-height: 26px;">&lt;/<span class="hljs-name" style="color: #e45649; line-height: 26px;">div</span>&gt;</span><br>&nbsp;&nbsp;<span class="hljs-tag" style="line-height: 26px;">&lt;/<span class="hljs-name" style="color: #e45649; line-height: 26px;">div</span>&gt;</span></span><br>&lt;<span class="hljs-regexp" style="color: #50a14f; line-height: 26px;">/template&gt;<br>&lt;script&gt;<br>import&nbsp;{&nbsp;reactive&nbsp;}&nbsp;from&nbsp;’vue’<br>export&nbsp;default&nbsp;{<br>&nbsp;&nbsp;name:&nbsp;’App’,<br>&nbsp;&nbsp;components:&nbsp;{<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;setup()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;state&nbsp;=&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copyText:&nbsp;’a&nbsp;copy&nbsp;directive’,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age:&nbsp;’123’,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;note:&nbsp;’’<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;/</span><em>&nbsp;<span class="hljs-keyword" style="color: #a626a4; line-height: 26px;">const</span>&nbsp;longpress&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(<span class="hljs-string" style="color: #50a14f; line-height: 26px;">‘长按指令生效’</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</em><span class="hljs-regexp" style="color: #50a14f; line-height: 26px;">/<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;press(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(state.copyText)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;handleSubmit()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(state.age);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;…state,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;press,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleSubmit<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br>&lt;/</span>script&gt;<br><span class="xml" style="line-height: 26px;"><span class="hljs-tag" style="line-height: 26px;">&lt;<span class="hljs-name" style="color: #e45649; line-height: 26px;">style</span>&gt;</span><span class="css" style="line-height: 26px;"><br><span class="hljs-selector-id" style="color: #4078f2; line-height: 26px;">#app</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">font-family</span>:&nbsp;Avenir,&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">-webkit-font-smoothing</span>:&nbsp;antialiased;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">-moz-osx-font-smoothing</span>:&nbsp;grayscale;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">text-align</span>:&nbsp;center;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">color</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">#2c3e50</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">margin-top</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">60px</span>;<br>}<br><span class="hljs-selector-class" style="color: #986801; line-height: 26px;">.water</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">position</span>:&nbsp;absolute;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">width</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">100%</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">height</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">100%</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">top</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">0</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">left</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">0</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">z-index</span>:&nbsp;-<span class="hljs-number" style="color: #986801; line-height: 26px;">1</span>;<br>}<br><span class="hljs-selector-class" style="color: #986801; line-height: 26px;">.box</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">position</span>:&nbsp;relative;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">width</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">100px</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">height</span>:&nbsp;<span class="hljs-number" style="color: #986801; line-height: 26px;">100px</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #50a14f; line-height: 26px;">background-color</span>:&nbsp;antiquewhite;<br>}<br></span><span class="hljs-tag" style="line-height: 26px;">&lt;/<span class="hljs-name" style="color: #e45649; line-height: 26px;">style</span>&gt;</span></span><br></code></pre><br><h4 data-tool="mdnice编辑器" id="参考文章" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</span><span class="suffix" style="display: none;"></span></h4><br><blockquote class="multiquote-1" data-tool="mdnice编辑器" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);"><span style="color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;">❝</span><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;"><a href="https://juejin.cn/post/6906028995133833230" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;" target="_blank" rel="noopener">分享8个非常实用的Vue自定义指令</a></p><br><p style="padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;"><a href="https://github.com/songxuy/vue-directive" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;" target="_blank" rel="noopener">项目代码</a></p><br><span style="float: right; color: RGBA(64, 184, 250, .5);">❞</span></blockquote><br></section>
            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='false'
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
			<ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#指令的介绍及引入"><span class="toc-number">1.</span> <span class="toc-text">指令的介绍及引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复制"><span class="toc-number">2.</span> <span class="toc-text">复制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#拖拽"><span class="toc-number">3.</span> <span class="toc-text">拖拽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#输入过滤"><span class="toc-number">4.</span> <span class="toc-text">输入过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#水印"><span class="toc-number">5.</span> <span class="toc-text">水印</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用代码"><span class="toc-number">6.</span> <span class="toc-text">使用代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参考文章"><span class="toc-number">7.</span> <span class="toc-text">参考文章</span></a></li></ol>	
        </div>
    
</div>


    </div>
</div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":145,"height":315,"vOffset":-60},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>

<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
